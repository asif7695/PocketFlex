<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="style.css">
    <title>PocketFlex - Delete Expense</title>
</head>
<body>
    <div class="container">
        <h1>PocketFlex</h1>
        <h2>Delete Expense</h2>
        <ul id="expense-list">
            <li>No expenses to show.</li>
        </ul>
        <form id="delete-expense-form">
            <input type="number" id="delete-index" placeholder="Enter index to delete" min="1" required>
            <input type="submit" value="Delete Expense">
        </form>
        <p id="delete-message" style="display: none;"></p>
        <a href="Main.html">Back to Dashboard</a>
        <footer>Made by Team PocketFlex</footer>
    </div>
    <script>
        // Load expenses from localStorage
        let expenses = JSON.parse(localStorage.getItem('expenses')) || [];
        const expenseList = document.getElementById('expense-list');
        const deleteForm = document.getElementById('delete-expense-form');
        const deleteMessage = document.getElementById('delete-message');

        // Display expenses
        function displayExpenses() {
            if (expenses.length === 0) {
                expenseList.innerHTML = '<li>No expenses to show.</li>';
            } else {
                expenseList.innerHTML = '';
                expenses.forEach((expense, index) => {
                    const li = document.createElement('li');
                    li.textContent = `${index + 1}. Title: ${expense.title}, Amount: ${expense.amount} BDT, Category: ${expense.category}`;
                    expenseList.appendChild(li);
                });
            }
        }
        displayExpenses();

        // Handle form submission
        deleteForm.addEventListener('submit', function(e) {
            e.preventDefault();
            const index = parseInt(document.getElementById('delete-index').value) - 1;

            // Validate index
            if (index < 0 || index >= expenses.length) {
                deleteMessage.textContent = 'Invalid index.';
                deleteMessage.className = 'error';
                deleteMessage.style.display = 'block';
                return;
            }

            // Delete expense and update localStorage
            expenses.splice(index, 1);
            localStorage.setItem('expenses', JSON.stringify(expenses));

            // Show success message and update list
            deleteMessage.textContent = 'Expense deleted.';
            deleteMessage.className = 'success';
            deleteMessage.style.display = 'block';
            displayExpenses();

            // Clear form
            deleteForm.reset();
        });
    </script>
</body>
</html>